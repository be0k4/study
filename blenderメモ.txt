Dblender関連メモ

ファイルの削除：エディタータイプをアウトライナー(shift + f9)にし、表示モードをblenderファイルにする

テクスチャ塗り：UVEditingタブに切り替えて、UV > UV展開で選択したメッシュをテクスチャ上に展開する。
		ctrl + e ：辺をシームとしてマーク(UV展開する際に、その辺を境にメッシュを切り開く)
		左上UV選択の同期をオンにすると、展開図と頂点の関係が分かりやすい
		TexturePaintタブに切り替えて、3dモデルに直接塗るか画像に塗るか決める。
ウィンドウの分割・統合：ウィンドウの境目で右クリック


☆ショトカメモ
G：移動
E：押し出し
S：拡大縮小A
R :回転
F：辺・面を作成・面を連結alt + p：ボーンのコネクト解除
J：辺で面を分割。FとｐJは似ているが、作成と分割では意味が違うので注意
P：分離(メッシュを別のオブジェクトとしてきりとる)
M：二つの頂点をマージする
DELETE：溶解・削除

shift + w：曲げ(3dカーソルとマウスカーソルの間のメッシュを曲げる)
shift + a：追加
shift + d：複製A
shift + c：3Dカーソルを原点へ
shift + h：頂点を隠す

テンキー　/：選択したオブジェクトのみ表示	
alt + m：頂点を分割する(マージしたものをばらけさせる)
alt + g：原点へ移動
alt + h：隠したものを表示
alt + 左クリック：辺ループ選択
shif + v：辺スライド。辺ループをメッシュに沿ってスライドさせる
alt + s：膨張縮小(空気を入れたり抜いたりする感じ)
ctrl + l：つながっている頂点全選択
ctrl + j：二つのオブジェクトを統合(マテ/リアルやモディファイヤーは統合先のものになる)
ctrl + e：辺をシャープとしてマーク(辺分離モディファイア―をつけたときに、その辺を境にメッシュを分離した状態とみなすことができる)
	　辺をシームとしてマーク(UV展開する際に、その辺を境にメッシュを切り開く)
ctrl + z :戻る
sfiht + ctrl + z：進む(ctrl y)
ctrl + p：アーマチュア変形(アーマチュアとオブジェクトを親子関係にする、アーマチュアモディファイヤーがつく)

辺ループのブリッジ：二つ以上の辺ループを選択中にできる。辺と辺の間に面を生成する
間接の作成：関節の内側にあたる点を選択し、delete > 辺ループで作成できる

自動マージ：オプションから設定可能。頂点同士が近づいたときに、閾値以下で自動でマージされる


☆モディファイア―
モディファイアーの適用：適用することで、モディファイアーの影響がメッシュに反映され、モディファイアー自体は消える。
ミラー：左右対称なオブジェクト等に有効
スクリュー:辺を回転させたメッシュを作成する
辺分離：辺と面の接触点を分けてくれる。面と面をはっきり別物にしたい時に便利。
アーマチュア：メッシュ、ボーンの順に選択し、ctrl + pでアーマチュア変形を行うと付与される

☆アニメーション関係
アニメーションの追加：xでリンクを解除し(これは削除ではない)、+新規を選択
alt + p：ボーンのコネクト解除、親子関係のクリア

スキニング：アーマチュアがポーズモードの状態で、メッシュを選択しウェイトペイントモードにする。
※編集>オブジェクトのモードをロック　の☑を外さないと、ポーズモードで他のオブジェクトを選択できない
	右上　ボーン>形状をフェード　の☑を外さないと〃
	alt +　左クリックでボーンを選択し、ウェイトを付けたい頂点をドラッグする。
	左右対称なボーンは、右上のXとプルダウンメニュー内の頂点グループミラーを有効にするように

ポーズモード
	ポーズモードにてshift + I ：IKを追加、IK制御を行うボーンは親子関係を切っておく
	ポーズモードにてポーズをコピー後shift + ctrl + v：ポーズの反転貼り付け
	ドープシートでアニメーション切り替わらないときは、ボーンを選択すると切り替わる
	ポーズ>トランスフォームをクリアでレストになる
	ポーズ>適用>レストポーズでデフォルトポーズを設定
	ポーズ>中間ポーズでレストポーズと現在のポーズをブレンドして中間ポーズを作成できる
シェイプキーアニメーション
	シェイプキーアニメーションは値の横の♦を押すことでキーをタイムラインに打てるが、それだと全てのアニメーションに適用されてしまう
	シェイプキーとアーマチュアを併用する場合は、シェイプキーの値の上で右クリック→ドライバを追加することで、シェイプキーを制御できる
		ドライバが追加できない場合は、一度キーを全てクリアする。ドライバは、適当なボーンを作成し、それで制御させるとよい
	シェイプキーを設定する前に、アーマチュア以外のモディファイアーを適用させておかないとエクスポートできない。


☆blenderからUnityへimport時の注意点
・アニメーションがインポートされない場合は、blender側でアニメーションのボーンを確認し、存在しないボーンが設定されていないか確認する。
・アニメーションのフレームがおかしくなるのは、blender側で設定したfpsとUnityのfpsがかみ合わないから。どちらも60fpsにする、もしくはblenderデフォルトの24fpsだとうまくいく。

・マテリアルの設定：インポート後にＦBXデータのmaterialsタブからExtractMaterialsでマテリアルを抽出する。これでシェーダー等を設定できるようになる。
(blenderのシェーダー設定は引き継がれない。そのため、Ｕnity側で再度マテリアル、シェーダーを設定する必要あり。liltoonshaderを使うと楽)
・背面カリング問題：blenderでは背面のメッシュを表示するが、Unityでは透過される。
	右上のオーバーレイから面の向きにチェックを入れることで、裏側になっている面が分かる
	面を選択>メッシュ>ノーマル>反転

・テクスチャの設定：マテリアルのalbedoの横にドラッグ。

・スケールの設定
	適当な平面等を作成し、3Dカーソルを原点にして拡大縮小を行うことでアス比を保ったままスケールを調節する
	オブジェクト > 適用で位置・回転等をオブジェクトの持つデフォルト値として設定する
	デフォルトで出力するとUnity上ではスケールが100となるので、blender上でのスケールを1に設定したうえで、トランスフォームを適用に☑を入れる

・シェイプキーのエクスポート：エクスポート時の設定で、ジオメトリ > モディファイアーを適用　に☑が入るとシェイプキーがエクスポートされない